import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Testing/Framework/Project Config" tags={['dev-only', 'pending-review']} />

# Project-Specific Coverage Matrix Configuration
<div style={{display: 'inline-block', padding: '4px 12px', background: '#ffe066', color: '#7c5c00', borderRadius: '16px', fontWeight: 'bold', marginBottom: '16px'}}>‚è≥ Pending Review</div>

This file documents project-specific details for the coverage matrix workflow. It is intended to keep the main AI testing framework documentation generic and portable, while capturing all configuration and conventions unique to this project.

## Decorator Documentation
- Each decorator has a corresponding `.mdx` file in `test/storybook/docs/Testing/Decorators`.
- These files document the decorator's properties, the Permutation Matrix, and a summary table of test cases.

## Coverage Scripts and Data
- Each decorator owns a `Testing/Decorators/<Decorator>/coverage.js` script that regenerates compile coverage directly from its `rules.json`.
- Coverage output lives beside the script as `<Decorator>/coverage-data.json`; docs and verify guards read from that file.

## Running Coverage Scripts
- You can run a coverage script directly for a specific decorator.
- To run all coverage scripts at once, use `test/storybook/docs/Testing/Decorators/run-all-coverage.js`.
- Alternatively, from `test/storybook`, run `npm run coverage` to execute all coverage scripts.

## Project Paths and Coverage Script Config
- **Component Directory Root:** `test/wdio` (per-decorator verify scripts walk this tree via `_shared/verify-matrix-core.js`).
- **Coverage Scripts:** `Testing/Decorators/run-all-coverage.js` for the aggregate loop, or `Testing/Decorators/<Decorator>/coverage.js` for a single decorator.
- **Coverage Data:** `Testing/Decorators/<Decorator>/coverage-data.json`.

## Component Test Directory
- All component tests are located in `test/wdio`.
- This is the dedicated directory for isolated component-level tests.

## Adding New Components and Tests
- When adding new component files in `test/wdio`, place them under a folder named after the decorator being tested.
  - Example: `test/wdio/event` for components testing the `@Event` decorator.
- Add the corresponding test file under the same folder.
  - The test file must be named `cmp.test.tsx`.
- This organization keeps both components and their tests grouped by decorator.
- After adding new components, build them before running any tests:
  - Run: `npm run build` in the `test/wdio` folder.

## Building New Components for Tests
- After adding new component files in `test/wdio`, you must build the components before running any tests.
- Use the build script in the `test/wdio` folder:
  - Run: `npm run build`

## Running Component Tests
- To run the component tests in `test/wdio`, use the following command in that folder:
  - `npm run wdio`
- This will execute all tests named `cmp.test.tsx` under the relevant decorator folders.

## Test File Naming and Location Conventions
- **Component Tests:**
  - Directory: `test/wdio`
  - Component files must have a `-cmp` suffix (e.g., `my-feature-cmp.tsx`)
  - Test files: `cmp.test.tsx`
- **Core Tests:**
  - Directory: `src/`
  - See `core_tests.mdx` for subdirectory conventions
- **E2E Tests:**
  - Directory: `test/end-to-end`
  - See `e2e_tests.mdx` for additional groupings

## Coverage Matrix Workflow
- Coverage scripts enumerate all decorator permutations and scan for coverage in generated components/tests.
- Missing permutations trigger new component/test generation.
- Matrix and documentation are updated after each iteration.
- **Verification process:** Run `Testing/Decorators/<Decorator>/verify-matrix.js` (or the `npm run <decorator>:verify-matrix` shortcut) to enforce parity/grouping/exclusivity and rebuild `coverage-overlay.json`.

---

This file should be updated with any new conventions, paths, or project-specific details as the coverage matrix workflow evolves.
