import { Meta } from '@storybook/addon-docs/blocks';
import data from './coverage-data.json';

<Meta title="Testing/Decorators/@State"/>

# @State Testing Matrix

The `@State` decorator is used to manage internal state for a component. When a state property changes, the component will re-render. This matrix tracks the test coverage for different types and configurations of the `@State` decorator.

## State Characteristics

The `@State` decorator is used for managing internal data that can change over time. Unlike `@Prop`, state is not meant to be passed in from a parent component.

- **Type**: `@State` can be used with any standard data type, such as `string`, `number`, `boolean`, `array`, or `object`. The type can be explicitly annotated or inferred from the initial value.

- **Default Value**: A state property can be initialized with a default value. If no default value is provided, it will be `undefined`. Tests should cover both scenarios to ensure the component behaves correctly.

## Covered Permutations

<div>
  <strong>Permutation Coverage:</strong> {data.coverage.covered}/{data.coverage.total} permutations covered (
  <strong>{data.coverage.percent}%</strong>)
</div>

<div style={{ maxWidth: '100%', width: '100%', background: '#fff' }}>
  <table style={{ width: '100%', borderCollapse: 'collapse', tableLayout: 'fixed' }}>
    <colgroup>
      <col style={{ width: '33%' }} />
      <col style={{ width: '33%' }} />
      <col style={{ width: '34%' }} />
    </colgroup>
    <thead>
      <tr>
        <th>Type</th>
        <th>Has Default Value</th>
        <th>Number of Occurrences</th>
      </tr>
    </thead>
    <tbody>
      {data.coveredPermutations.map((p, i) => (
        <tr key={i}>
          {p.options.map((opt, j) => (
            <td key={j}>{opt}</td>
          ))}
          <td>{p.count}</td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

## Test Case Summary

The following table summarizes the actual component-level WDIO test cases for the `@State` decorator:

<div style={{ maxWidth: '100%', width: '100%', background: '#fff' }}>
  <table style={{ width: '100%', borderCollapse: 'collapse' }}>
    <colgroup>
      <col style={{ width: '50%' }} />
      <col style={{ width: '30%' }} />
      <col style={{ width: '20%' }} />
    </colgroup>
    <thead>
      <tr style={{ background: '#f2f2f2' }}>
        <th style={{ padding: '8px', border: '1px solid #ddd', textAlign: 'left' }}>Test Case</th>
        <th style={{ padding: '8px', border: '1px solid #ddd', textAlign: 'left' }}>Permutations Covered</th>
        <th style={{ padding: '8px', border: '1px solid #ddd', textAlign: 'center' }}>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style={{ padding: '8px', border: '1px solid #ddd' }}>
          Clicking a button updates the <code>@State</code> property and the DOM reflects the new state (e.g., selected day is highlighted).
        </td>
        <td style={{ padding: '8px', border: '1px solid #ddd' }}>
          All types, with/without default value
        </td>
        <td style={{ padding: '8px', border: '1px solid #ddd', textAlign: 'center' }}>
          <span style={{ color: 'green' }}>âœ”</span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

