import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{useMDXComponents as w}from"./index-CH0APm6g.js";import{M as A}from"./blocks-CZZPPcD0.js";import{m as b}from"./test-coverage-c93k6olc.js";import{r as G}from"./iframe-ClBj42JF.js";import{R as I}from"./RulesAtAGlance-B3S_3qVP.js";import{T as D}from"./TestCasesTable-CKtRWjAr.js";import{G as k}from"./GeneratedComponentsTable-LED9Fa8f.js";import"./preload-helper-D9Z9MdNV.js";import"./index-l35Taa7Y.js";const S="@Method",P={returns:["void","value","promise"],async:["✓","✗"],args:["none","one"]},R=[],F=[{name:"void",when:{returns:"void"}},{name:"value",when:{returns:"value"}},{name:"promise",when:{returns:"promise"}}],B={naming:{prefix:"method",includeOptions:["returns","async","args"]}},E={decorator:S,options:P,exclusiveGroups:R,modes:F,emit:B},N={covered:8,total:8,percent:"100.0"},O=[{options:["void","✓","none"],count:1,files:["void/method-void-async-true-args-none.tsx"]},{options:["void","✓","one"],count:1,files:["void/method-void-async-true-args-one.tsx"]},{options:["value","✓","none"],count:1,files:["value/method-value-async-true-args-none.tsx"]},{options:["value","✓","one"],count:1,files:["value/method-value-async-true-args-one.tsx"]},{options:["promise","✗","none"],count:1,files:["promise/method-promise-async-false-args-none.tsx"]},{options:["promise","✗","one"],count:1,files:["promise/method-promise-async-false-args-one.tsx"]},{options:["promise","✓","none"],count:1,files:["promise/method-promise-async-true-args-none.tsx"]},{options:["promise","✓","one"],count:1,files:["promise/method-promise-async-true-args-one.tsx"]}],h={coverage:N,coveredPermutations:O},X=()=>{const t=b.items||[],s=a=>t.filter(c=>a.has(c.group)),d=a=>({tested:a.filter(c=>c.tested).length,total:a.length}),m=new Set(["promise"]),n=new Set(["value"]),p=new Set(["void"]),o=d(s(m)),r=d(s(n)),i=d(s(p)),l=a=>{const c=new Set;for(const v of a)for(const y of v.caseIds||[])c.add(y);return Array.from(c).sort((v,y)=>v-y)},u=l(s(m)),x=l(s(n)),g=l(s(p)),j=u.length>0,C=x.length>0,T=g.length>0,M=[{id:1,implemented:j,desc:"Promise methods expose public API and update DOM after resolution across different async configurations and argument patterns.",types:e.jsxs(e.Fragment,{children:["returns: promise × async: true/false × args: none/one",e.jsx("br",{}),e.jsxs("small",{children:["Covered: ",o.tested,"/",o.total]})]}),tested:o.tested,total:o.total},{id:2,implemented:C,desc:"Value-returning methods provide immediate results and update component state synchronously.",types:e.jsxs(e.Fragment,{children:["returns: value × async: true × args: none/one",e.jsx("br",{}),e.jsxs("small",{children:["Covered: ",r.tested,"/",r.total]})]}),tested:r.tested,total:r.total},{id:3,implemented:T,desc:"Void methods trigger side effects without return values, updating internal state via async lifecycle.",types:e.jsxs(e.Fragment,{children:["returns: void × async: true × args: none/one",e.jsx("br",{}),e.jsxs("small",{children:["Covered: ",i.tested,"/",i.total]})]}),tested:i.tested,total:i.total}];return e.jsx(D,{rows:M,previewCount:3})},_=()=>{const t=G.useMemo(()=>{const d=b.items||[],m=new Map(d.map(n=>[n.optionsKey,n]));return(h.coveredPermutations||[]).map((n,p)=>{const[o,r,i]=n.options||[],l=(n.options||[]).join("|"),u=m.get(l)||{},x=Array.isArray(u.caseIds)?[...u.caseIds].sort((g,j)=>g-j):[];return{index:p,returns:o,async:r,args:i,caseNumbers:x}})},[]),s=[{key:"returns",label:"Returns",width:"25%"},{key:"async",label:"Async",width:"20%"},{key:"args",label:"Args",width:"20%"},{key:"testedBy",label:"Tested By",width:"35%"}];return e.jsx(k,{rows:t,columns:s,previewCount:3})};function f(t){const s={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...w(),...t.components};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Testing/Decorators/@Method"}),`
`,e.jsx(s.h1,{id:"method-decorator",children:"@Method Decorator"}),`
`,e.jsxs(s.p,{children:["The ",e.jsx(s.code,{children:"@Method"})," decorator exposes public instance methods on a Stencil component."]}),`
`,e.jsx(s.h2,{id:"decorator-properties",children:"Decorator Properties"}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsx(s.li,{children:"returns: void | value | promise"}),`
`,e.jsx(s.li,{children:"async: marks the method async (affects return type when returning a promise)"}),`
`,e.jsx(s.li,{children:"args: none | one"}),`
`]}),`
`,e.jsx(s.h2,{id:"rules-at-a-glance",children:"Rules (at a glance)"}),`
`,e.jsx(I,{rules:E,sourcePath:"./data/rules.json",modeLabel:"Return kind"}),`
`,e.jsx(s.h2,{id:"test-cases",children:"Test Cases"}),`
`,e.jsxs(s.p,{children:['Note: Test cases are high‑level scenarios, not a 1‑to‑1 mapping to tests (it() blocks). A single WDIO test can exercise many generated components, and a component can participate in multiple tests. The "Tested By" column in the Generated Components table shows which case(s) (#1, #2) each component is covered by. All @Method tests reside under ',e.jsx("code",{children:"test/wdio/method"}),"."]}),`
`,`
`,e.jsx(X,{}),`
`,e.jsx(s.h2,{id:"generated-components",children:"Generated Components"}),`
`,e.jsx("div",{children:e.jsxs(s.p,{children:[e.jsx("strong",{children:"Generated Components:"})," ",h.coverage.covered," of ",h.coverage.total,` generated (
`,e.jsxs("strong",{children:[h.coverage.percent,"%"]}),")"]})}),`
`,e.jsx("p",{style:{marginTop:8},children:e.jsxs(s.p,{children:[`This section lists the generated components we build to stress the compiler. Each row is one component with a
unique combination of decorator options (`,e.jsx("code",{children:"returns"})," × ",e.jsx("code",{children:"async"})," × ",e.jsx("code",{children:"args"}),`). If a combo fails to compile,
we capture that as a rule in `,e.jsx("code",{children:"rules.json"}),`, update the list, and regenerate. The "Tested By" column reflects which
high‑level test cases cover each component.`]})}),`
`,`
`,e.jsx(_,{}),`
`,e.jsx(s.h2,{id:"component-grouping",children:"Component Grouping"}),`
`,e.jsxs(s.p,{children:["Generated components are organized by return type under ",e.jsx(s.code,{children:"test/wdio/method/components/"}),":"]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"void/"})," — void-returning methods"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"value/"})," — value-returning methods"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"promise/"})," — promise-returning methods"]}),`
`]})]})}function Y(t={}){const{wrapper:s}={...w(),...t.components};return s?e.jsx(s,{...t,children:e.jsx(f,{...t})}):f(t)}export{_ as MethodGeneratedComponents,X as MethodTestCasesTable,Y as default};
